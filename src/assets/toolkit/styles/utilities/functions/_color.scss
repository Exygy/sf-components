////
/// Color function
////

/// Return a color from the color map.
///
/// @example scss - SCSS
///   background-color: color(white);
///
/// @example css - CSS
///   background-color: #fff;
///
/// @requires {variable} $colors

@function color($color, $palette: ()) {
  // First, we marge this default color palette with the cornerstone color palette we set up in `variables/color`
  $_default-color-palette: map-merge((
    // Branded color palette
      primary:                      #0077da,
      primary-darker:               #f90f90,
      primary-darkest:              #205493,
      primary-alt:                  #008fff,
      primary-alt-dark:             #0067be,
      primary-alt-darker:           #00579E,
      primary-alt-darkest:          #004070,
      primary-alt-light:            #ffebcc,
      primary-alt-lightest:         #daeeff,
      secondary:                    #00bed5,
      secondary-dark:               #0097A8,
      secondary-darker:             #008A99,
      secondary-darkest:            #006E7A,
      secondary-light:              #3CBECD,
      secondary-lightest:           #CBEFF1,

    // Base color palette
    //

      white:                        #ffffff,
      dust:                         #f5f8f9,
      smoke:                        #f5f5f5,
      charcoal:                     #555555,
      oil:                          #333333,
      base:                         #212121,
      black:                        #000000,
      grey:                         #5b616b,
      grey-dark:                    #323a45,
      grey-medium:                  #757575,
      grey-light:                   #aeb0b5,
      grey-lighter:                 #d6d7d9,
      grey-lightest:                #f1f1f1,
      gold:                         #fdb81e,
      gold-light:                   #f9c642,
      gold-lighter:                 #fad980,
      gold-lightest:                #fff1d2,
      green:                        #2e8540,
      green-light:                  #4aa564,
      green-lighter:                #94bfa2,
      green-lightest:               #e7f4e4,
      red:                          #e31c3d,
      red-light:                    #E7405C,
      red-lighter:                  #EC697F,
      red-lightest:                 #f9d2d8,

    // Functional color palette
    //

      focus:                        #3e94cf,
      visited:                      #4c2c92,
      shadow:                rgba(#000, 0.3),
  ), $colors);

  // Then, we merge the $_default-color-palette we just merged with the palette that was specified by the mixin.
  $_color-palette: map-merge($_default-color-palette, $palette);

  // Finally, we return the requested color value from our combined merge. This allows custom color maps to be able to
  // only specify colors that we want to specifically differ from the base map.
  // As an example, the cornerstone color map does not include any of the generic colors, but if I created a custom map
  // that only had a `background: #880000` value, I could still call `color: color(brand, $custom-map)`, which
  // would return the brand value from the `$colors` map. Additionally, if I call `color: color(lime, $custom-map)`
  // it will return the lime color from the generic palette from the default map.
  @return map-get($_color-palette, $color);
}
